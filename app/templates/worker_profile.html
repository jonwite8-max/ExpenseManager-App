{% extends "base_worker.html" %}

{% block content %}
<div class="max-w-6xl mx-auto px-3 sm:px-4">
    <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
    <div class="mb-6 md:mb-8 text-center md:text-right">
        <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">๐ค ุจุทุงูุชู ุงูุดุฎุตูุฉ</h1>
        <p class="text-gray-600 mt-2 text-base sm:text-lg">ูุนูููุงุช ุงูุญุณุงุจ ูุงูุฅุญุตุงุฆูุงุช</p>
    </div>
    
    <!-- ุฒุฑ ูุงููู ุงูุนูู ุงูุฌุฏูุฏ -->
    <div class="mb-6 text-center">
        <button onclick="showLaborLaw()" 
                class="bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold text-sm sm:text-base transition-all transform hover:scale-[1.02] shadow-lg flex items-center justify-center mx-auto">
            <i class="fas fa-gavel ml-2"></i>
            ๐ ูุงููู ุงูุนูู ูุงูุดุฑูุท
        </button>
    </div>
    
    <div class="grid gap-4 sm:gap-6 lg:grid-cols-2">
        <!-- ุงูุจุทุงูุฉ ุงูุดุฎุตูุฉ -->
        <div class="card-modern p-4 sm:p-6">
            <div class="flex items-center mb-4 sm:mb-6">
                <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-user text-white text-lg sm:text-2xl"></i>
                </div>
                <div class="mr-3 sm:mr-4">
                    <h2 class="text-lg sm:text-xl font-bold text-gray-800">ุงููุนูููุงุช ุงูุดุฎุตูุฉ</h2>
                    <p class="text-gray-600 text-sm sm:text-base">ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ</p>
                </div>
            </div>
            
            <div class="space-y-3 sm:space-y-4">
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg sm:rounded-xl">
                    <div>
                        <div class="text-xs sm:text-sm text-gray-600">ุงูุงุณู ุงููุงูู</div>
                        <div class="font-semibold text-gray-800 text-sm sm:text-base">{{ worker.name }}</div>
                    </div>
                    <i class="fas fa-id-card text-purple-500 text-base sm:text-lg"></i>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg sm:rounded-xl">
                    <div>
                        <div class="text-xs sm:text-sm text-gray-600">ุฑูู ุงููุงุชู</div>
                        <div class="font-semibold text-gray-800 text-sm sm:text-base">{{ worker.phone }}</div>
                    </div>
                    <i class="fas fa-phone text-green-500 text-base sm:text-lg"></i>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg sm:rounded-xl">
                    <div>
                        <div class="text-xs sm:text-sm text-gray-600">ุงูุนููุงู</div>
                        <div class="font-semibold text-gray-800 text-sm sm:text-base">{{ worker.address or 'ุบูุฑ ูุญุฏุฏ' }}</div>
                    </div>
                    <i class="fas fa-map-marker-alt text-red-500 text-base sm:text-lg"></i>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg sm:rounded-xl">
                    <div>
                        <div class="text-xs sm:text-sm text-gray-600">ุชุงุฑูุฎ ุงูุจุฏุก</div>
                        <div class="font-semibold text-gray-800 text-sm sm:text-base">{{ worker.start_date.strftime('%Y-%m-%d') }}</div>
                    </div>
                    <i class="fas fa-calendar-alt text-blue-500 text-base sm:text-lg"></i>
                </div>
            </div>
        </div>

        <!-- ูุนูููุงุช ุงูุญุณุงุจ -->
        <div class="card-modern p-4 sm:p-6">
            <div class="flex items-center mb-4 sm:mb-6">
                <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg">
                    <i class="fas fa-lock text-white text-lg sm:text-2xl"></i>
                </div>
                <div class="mr-3 sm:mr-4">
                    <h2 class="text-lg sm:text-xl font-bold text-gray-800">ูุนูููุงุช ุงูุฏุฎูู</h2>
                    <p class="text-gray-600 text-sm sm:text-base">ุฅุฏุงุฑุฉ ุงูุญุณุงุจ</p>
                </div>
            </div>
            
            <div class="space-y-4 sm:space-y-6">
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg sm:rounded-2xl p-3 sm:p-4 border border-blue-100">
                    <div class="text-xs sm:text-sm text-gray-600 mb-2">ุงุณู ุงููุณุชุฎุฏู</div>
                    <div class="font-mono font-bold text-gray-800 text-base sm:text-lg break-all">{{ worker.username }}</div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg sm:rounded-2xl p-3 sm:p-4 border border-purple-100">
                    <div class="text-xs sm:text-sm text-gray-600 mb-2">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</div>
                    <div class="flex items-center justify-between">
                        <input type="password" value="{{ real_password }}" 
                               class="font-mono font-bold text-gray-800 text-sm sm:text-base bg-transparent border-none w-full overflow-x-auto" 
                               id="password-field" readonly>
                        <div class="flex gap-1 sm:gap-2 mr-2">
                            <button type="button" onclick="togglePasswordVisibility()" 
                                    class="text-purple-600 hover:text-purple-800 transition-colors p-1 sm:p-2 rounded-lg hover:bg-purple-50"
                                    id="toggle-password-btn">
                                <i class="fas fa-eye text-base sm:text-lg"></i>
                            </button>
                            <button type="button" onclick="copyPassword()" 
                                    class="text-green-600 hover:text-green-800 transition-colors p-1 sm:p-2 rounded-lg hover:bg-green-50">
                                <i class="fas fa-copy text-base sm:text-lg"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">ูููุฉ ุงููุฑูุฑ ุงูุญููููุฉ ูุญุณุงุจู</p>
                </div>
                
                <!-- ูููุฐุฌ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ -->
                <div class="pt-4 sm:pt-6 border-t border-gray-200">
                    <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-3 sm:mb-4">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h3>
                    <form id="change-password-form" class="space-y-3 sm:space-y-4">
                        <div class="space-y-3">
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
                                <input type="password" name="current_password" 
                                       placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ"
                                       class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl bg-white text-gray-800 text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                <input type="password" name="new_password" 
                                       placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ"
                                       class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl bg-white text-gray-800 text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <div>
                                <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                                <input type="password" name="confirm_password" 
                                       placeholder="ุฃุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ"
                                       class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg sm:rounded-xl bg-white text-gray-800 text-xs sm:text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all">
                            </div>
                            <button type="submit" 
                                    class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base transition-all transform hover:scale-[1.02] shadow-lg">
                                <i class="fas fa-key ml-2"></i>
                                ุญูุธ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ุงูุชูุฑูุฑ ุงููุงูู ุงูููุตู -->
    <div class="mt-6 sm:mt-8 card-modern p-4 sm:p-6">
        <div class="flex items-center mb-4 sm:mb-6">
            <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg">
                <i class="fas fa-chart-line text-white text-lg sm:text-2xl"></i>
            </div>
            <div class="mr-3 sm:mr-4">
                <h2 class="text-lg sm:text-xl font-bold text-gray-800">ุงูุชูุฑูุฑ ุงููุงูู ุงูููุตู</h2>
                <p class="text-gray-600 text-sm sm:text-base">ููุฎุต ุงูุฃุฏุงุก ุงููุงูู</p>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-2 sm:gap-4 mb-6 sm:mb-8">
            <div class="text-center p-3 sm:p-4 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg sm:rounded-2xl border border-blue-200">
                <div class="text-lg sm:text-2xl md:text-3xl font-bold text-blue-600">{{ financial_report.total_salary }} ุฏุฌ</div>
                <div class="text-xs sm:text-sm text-blue-700 font-medium mt-1 sm:mt-2">ุฅุฌูุงูู ุงููุณุชุญู</div>
            </div>
            
            <div class="text-center p-3 sm:p-4 bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg sm:rounded-2xl border border-green-200">
                <div class="text-lg sm:text-2xl md:text-3xl font-bold text-green-600">{{ financial_report.bonuses }} ุฏุฌ</div>
                <div class="text-xs sm:text-sm text-green-700 font-medium mt-1 sm:mt-2">ุงูููุงูุขุช ูุงูุชุญููุฒุงุช</div>
            </div>
            
            <div class="text-center p-3 sm:p-4 bg-gradient-to-br from-orange-50 to-red-100 rounded-lg sm:rounded-2xl border border-orange-200">
                <div class="text-lg sm:text-2xl md:text-3xl font-bold text-orange-600">{{ financial_report.deductions }} ุฏุฌ</div>
                <div class="text-xs sm:text-sm text-orange-700 font-medium mt-1 sm:mt-2">ุงูุฎุตููุงุช</div>
            </div>
            
            <div class="text-center p-3 sm:p-4 bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg sm:rounded-2xl border border-purple-200">
                <div class="text-lg sm:text-2xl md:text-3xl font-bold text-purple-600">{{ financial_report.net_salary }} ุฏุฌ</div>
                <div class="text-xs sm:text-sm text-purple-700 font-medium mt-1 sm:mt-2">ุตุงูู ุงูุฑุงุชุจ</div>
            </div>
        </div>

        <!-- ุงูุชูุงุตูู ุงููุงููุฉ -->
        <div class="grid gap-4 sm:gap-6 md:grid-cols-2">
            <!-- ุงูุฅุถุงูุงุช -->
            <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg sm:rounded-2xl p-4 sm:p-6 border border-green-200">
                <h3 class="font-bold text-green-800 text-base sm:text-lg mb-3 sm:mb-4 flex items-center">
                    <i class="fas fa-plus-circle ml-2 text-sm sm:text-base"></i>
                    ุงูุฅุถุงูุงุช ูุงูููุงูุขุช
                </h3>
                <div class="space-y-2 sm:space-y-3 text-xs sm:text-sm">
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ุงูุฑุงุชุจ ุงูุฃุณุงุณู:</span>
                        <span class="font-bold text-green-600 text-xs sm:text-sm">{{ worker.monthly_salary }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ููุงูุฃุฉ ุงูุนูู ุงูุฎุงุฑุฌู:</span>
                        <span class="font-bold text-green-600 text-xs sm:text-sm">{{ worker.outside_work_bonus }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ุงูุชุญููุฒุงุช:</span>
                        <span class="font-bold text-green-600 text-xs sm:text-sm">{{ worker.incentives }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 sm:p-3 bg-green-100 rounded-lg mt-3 sm:mt-4">
                        <span class="font-bold text-green-800 text-xs sm:text-sm">ุงูุฅุฌูุงูู:</span>
                        <span class="font-bold text-green-800 text-xs sm:text-sm">{{ financial_report.total_income }} ุฏุฌ</span>
                    </div>
                </div>
            </div>

            <!-- ุงูุฎุตููุงุช -->
            <div class="bg-gradient-to-br from-red-50 to-pink-50 rounded-lg sm:rounded-2xl p-4 sm:p-6 border border-red-200">
                <h3 class="font-bold text-red-800 text-base sm:text-lg mb-3 sm:mb-4 flex items-center">
                    <i class="fas fa-minus-circle ml-2 text-sm sm:text-base"></i>
                    ุงูุฎุตููุงุช ูุงูุงุณุชูุทุงุนุงุช
                </h3>
                <div class="space-y-2 sm:space-y-3 text-xs sm:text-sm">
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ุงูุชุณุจููุงุช:</span>
                        <span class="font-bold text-red-600 text-xs sm:text-sm">{{ worker.advances }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ุฎุตู ุงูุบูุงุจ:</span>
                        <span class="font-bold text-red-600 text-xs sm:text-sm">{{ financial_report.absence_deduction }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-white rounded-lg">
                        <span class="text-gray-700">ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ:</span>
                        <span class="font-bold text-red-600 text-xs sm:text-sm">{{ financial_report.late_penalty }} ุฏุฌ</span>
                    </div>
                    <div class="flex justify-between items-center p-2 sm:p-3 bg-red-100 rounded-lg mt-3 sm:mt-4">
                        <span class="font-bold text-red-800 text-xs sm:text-sm">ุงูุฅุฌูุงูู:</span>
                        <span class="font-bold text-red-800 text-xs sm:text-sm">{{ financial_report.total_deductions }} ุฏุฌ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ุงูุชูููู ููุท -->
    <div class="mt-6 sm:mt-8 card-modern p-4 sm:p-6 md:p-8 text-center">
        <div class="max-w-md mx-auto">
            <div class="w-16 h-16 sm:w-20 sm:h-20 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl sm:shadow-2xl mx-auto mb-4 sm:mb-6">
                <i class="fas fa-star text-white text-2xl sm:text-3xl"></i>
            </div>
            <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">ุชูููู ุฃุฏุงุฆู</h2>
            <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">ุจูุงุกู ุนูู ุฃุฏุงุฆู ูู ุงูุทูุจูุงุช ุงูููุชููุฉ</p>
            
            <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 border border-yellow-200">
                <div class="text-4xl sm:text-5xl font-bold text-yellow-600 mb-3 sm:mb-4">{{ stats.average_rating }}/10</div>
                
                <!-- ุงููุฌูู -->
                <div class="flex justify-center space-x-1 sm:space-x-2 mb-4 sm:mb-6 flex-wrap">
                    {% for i in range(10) %}
                    <i class="fas fa-star text-{% if i < stats.average_rating %}yellow-400{% else %}gray-300{% endif %} text-lg sm:text-xl transform hover:scale-110 transition-transform"></i>
                    {% endfor %}
                </div>
                
                <div class="text-yellow-700 font-semibold text-sm sm:text-base">
                    {% if stats.average_rating >= 9 %}
                    ุฃุฏุงุก ูุชููุฒ! ๐
                    {% elif stats.average_rating >= 7 %}
                    ุฃุฏุงุก ุฌูุฏ ุฌุฏุงู ๐
                    {% elif stats.average_rating >= 5 %}
                    ุฃุฏุงุก ููุจูู ๐
                    {% else %}
                    ูุญุชุงุฌ ุชุญุณูู ๐ช
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ูุงูุฐุฉ ูุงููู ุงูุนูู -->
<div id="laborLawModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
        <!-- ุฑุฃุณ ุงููุงูุฐุฉ -->
        <div class="bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white">
            <div class="flex justify-between items-center">
                <h2 class="text-2xl font-bold">๐ ูุงููู ุงูุนูู ูุงูุดุฑูุท</h2>
                <button onclick="closeLaborLaw()" class="text-white hover:text-gray-200 text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- ูุญุชูู ุงููุงููู -->
        <div class="p-6 max-h-[70vh] overflow-y-auto labor-law-content">
            <!-- ุณูุชู ุฅุถุงูุฉ ูุญุชูู ุงููุงููู ููุง ุนุจุฑ JavaScript -->
        </div>
        
        <!-- ุชุฐููู ุงููุงูุฐุฉ -->
        <div class="bg-gray-50 p-4 border-t border-gray-200 text-center">
            <button onclick="closeLaborLaw()" 
                    class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg font-semibold transition-colors">
                ูููุช ูุดูุฑุงู
            </button>
        </div>
    </div>
</div>

<script>
// ุฏูุงู ุงูุชุญูู ุจูุงูุฐุฉ ูุงููู ุงูุนูู - ุงูุฅุตุฏุงุฑ ุงููุตุญุญ
function showLaborLaw() {
    console.log('โ showLaborLaw function called');
    
    const modal = document.getElementById('laborLawModal');
    const content = document.querySelector('.labor-law-content');
    
    if (!modal) {
        console.error('โ Modal not found!');
        alert('ุนุฐุฑุงูุ ุญุฏุซ ุฎุทุฃ ูู ุชุญููู ุงููุงูุฐุฉ');
        return;
    }
    
    // ๐ฅ ุฅุตูุงุญ: ุงุณุชุฎุฏุงู ูููุฉ ุงูุชุฑุงุถูุฉ ุฅุฐุง ูู ููู worker ูุชููุฑุงู
    const workerSalary = typeof worker !== 'undefined' && worker.monthly_salary ? worker.monthly_salary : 'ุบูุฑ ูุญุฏุฏ';
    
    // ูุญุชูู ูุงููู ุงูุนูู
    const laborLawContent = `
    <div class="space-y-6 text-gray-700">
        <!-- ุงูููุฏูุฉ -->
        <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
            <h3 class="text-lg font-bold text-blue-800 mb-2">๐ฏ ููุฏูุฉ</h3>
            <p class="text-blue-700">ูุฑุญุจุงู ุจู ูู ูุธุงู ุงูุนูู ุจุดุฑูุฉ SOFAZI. ููุฏู ูุฐุง ุงููุงููู ุฅูู ุชูุธูู ุงูุนูุงูุฉ ุจูู ุงูุนุงูู ูุงูุฅุฏุงุฑุฉ ูุถูุงู ุญููู ุฌููุน ุงูุฃุทุฑุงู.</p>
        </div>

        <!-- ุงูุจุงุจ ุงูุฃูู: ุฃุญูุงู ุนุงูุฉ -->
        <div class="border-l-4 border-green-500 pl-4">
            <h3 class="text-xl font-bold text-green-700 mb-4">๐ ุงูุจุงุจ ุงูุฃูู: ุฃุญูุงู ุนุงูุฉ</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-green-600">ุงููุงุฏุฉ 1: ุชุนุฑููุงุช</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li><strong>ุงูุนุงูู:</strong> ูู ุดุฎุต ุทุจูุนู ูุนูู ููุงุก ุฃุฌุฑ ูุฏู ุตุงุญุจ ุงูุนูู</li>
                        <li><strong>ุตุงุญุจ ุงูุนูู:</strong> ุดุฑูุฉ SOFAZI ุฃู ูู ููุซููุง</li>
                        <li><strong>ุงูุฃุฌุฑ:</strong> ูู ูุง ูุญุตู ุนููู ุงูุนุงูู ููุฏุงู ุฃู ุนููุงู ููุงุก ุนููู</li>
                        <li><strong>ุณุงุนุงุช ุงูุนูู:</strong> ุงููุชุฑุฉ ุงูุชู ูููู ูููุง ุงูุนุงูู ุชุญุช ุชุตุฑู ุตุงุญุจ ุงูุนูู</li>
                    </ul>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-green-600">ุงููุงุฏุฉ 2: ูุทุงู ุงูุชุทุจูู</h4>
                    <p class="text-sm">ูุทุจู ูุฐุง ุงููุงููู ุนูู ุฌููุน ุงูุนุงูููู ุจุดุฑูุฉ SOFAZI ุจุบุถ ุงููุธุฑ ุนู ููุน ุงูุนูู ุฃู ูุฏุฉ ุงูุนูุฏ.</p>
                </div>
            </div>
        </div>

        <!-- ุงูุจุงุจ ุงูุซุงูู: ุณุงุนุงุช ุงูุนูู ูุงูุฅุฌุงุฒุงุช -->
        <div class="border-l-4 border-blue-500 pl-4">
            <h3 class="text-xl font-bold text-blue-700 mb-4">โฐ ุงูุจุงุจ ุงูุซุงูู: ุณุงุนุงุช ุงูุนูู ูุงูุฅุฌุงุฒุงุช</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-blue-600">ุงููุงุฏุฉ 3: ุณุงุนุงุช ุงูุนูู</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li>ูุฏุฉ ุงูุนูู ุงููููู: 8 ุณุงุนุงุช ุนูู ูุนููุฉ</li>
                        <li>ูุฏุฉ ุงูุนูู ุงูุฃุณุจูุนู: 48 ุณุงุนุฉ ูุญุฏ ุฃูุตู</li>
                        <li>ููุช ุงูุฑุงุญุฉ: ุณุงุนุฉ ุฑุงุญุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ุจุนุฏ 5 ุณุงุนุงุช ุนูู ูุชูุงุตูุฉ</li>
                        <li>ุงูุนูู ุงูุฅุถุงูู: ูุญุณุจ ุจูุณุจุฉ 150% ูู ุงูุฃุฌุฑ ุงูุฃุณุงุณู</li>
                    </ul>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-blue-600">ุงููุงุฏุฉ 4: ุงูุฅุฌุงุฒุงุช</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li><strong>ุงูุฅุฌุงุฒุฉ ุงูุณูููุฉ:</strong> 30 ููู ุนูู ูุฏููุนุฉ ุงูุฃุฌุฑ ุจุนุฏ ุณูุฉ ูุงููุฉ ูู ุงูุนูู</li>
                        <li><strong>ุงูุฅุฌุงุฒุฉ ุงููุฑุถูุฉ:</strong> 15 ููู ูุฏููุนุฉ ุงูุฃุฌุฑ ูุงููุฉุ 15 ููู ุจูุตู ุงูุฃุฌุฑ</li>
                        <li><strong>ุงูุฅุฌุงุฒุงุช ุงูุฑุณููุฉ:</strong> ุญุณุจ ุงูุชูููู ุงูุฑุณูู ููุฏููุฉ</li>
                        <li><strong>ุฅุฌุงุฒุฉ ุงูุฒูุงุฌ:</strong> 5 ุฃูุงู ูุฏููุนุฉ ุงูุฃุฌุฑ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ุงูุจุงุจ ุงูุซุงูุซ: ุงูุฃุฌูุฑ ูุงูุญูุงูุฒ -->
        <div class="border-l-4 border-yellow-500 pl-4">
            <h3 class="text-xl font-bold text-yellow-700 mb-4">๐ฐ ุงูุจุงุจ ุงูุซุงูุซ: ุงูุฃุฌูุฑ ูุงูุญูุงูุฒ</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-yellow-600">ุงููุงุฏุฉ 5: ูููู ุงูุฃุฌูุฑ</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li><strong>ุงูุฑุงุชุจ ุงูุฃุณุงุณู:</strong> ${workerSalary} ุฏุฌ ุดูุฑูุงู</li>
                        <li><strong>ุจุฏู ุงูุชูุงู:</strong> 500 ุฏุฌ ููููุงู ููุนูู ุฎุงุฑุฌ ุงููุฑุดุฉ</li>
                        <li><strong>ุจุฏู ุทุนุงู:</strong> 300 ุฏุฌ ููููุงู</li>
                        <li><strong>ุงูุญูุงูุฒ:</strong> ุญุณุจ ุฃุฏุงุก ุงูุนุงูู ูุฌูุฏุฉ ุงูุนูู</li>
                    </ul>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-yellow-600">ุงููุงุฏุฉ 6: ุงุณุชุญูุงู ุงูุฃุฌุฑ</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li>ูุณุชุญู ุงูุนุงูู ุฃุฌุฑู ูุงููุงู ุนูุฏ ุงูุชูุงุก ูู ุดูุฑ</li>
                        <li>ูุชู ุงูุฏูุน ุฎูุงู ุฃูู 5 ุฃูุงู ูู ุงูุดูุฑ ุงูุชุงูู</li>
                        <li>ูุฎุตู ูู ุงูุฃุฌุฑ ุฃูุงู ุงูุบูุงุจ ุบูุฑ ุงููุจุฑุฑ</li>
                        <li>ูุญุชูุธ ุงูุนุงูู ุจุญูู ูู ุงูุฃุฌุฑ ุฃุซูุงุก ุงูุฅุฌุงุฒุงุช ุงููุฑุถูุฉ ูุงูุนุทู ุงูุฑุณููุฉ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ุงูุจุงุจ ุงูุฑุงุจุน: ุงููุงุฌุจุงุช ูุงููุณุคูููุงุช -->
        <div class="border-l-4 border-red-500 pl-4">
            <h3 class="text-xl font-bold text-red-700 mb-4">โ๏ธ ุงูุจุงุจ ุงูุฑุงุจุน: ุงููุงุฌุจุงุช ูุงููุณุคูููุงุช</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-red-600">ุงููุงุฏุฉ 7: ูุงุฌุจุงุช ุงูุนุงูู</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li>ุงูุงูุชุฒุงู ุจููุงุนูุฏ ุงูุนูู ุงูุฑุณููุฉ</li>
                        <li>ุชูููุฐ ุงูุชุนูููุงุช ุงูุตุงุฏุฑุฉ ูู ุงููุณุคูููู</li>
                        <li>ุงููุญุงูุธุฉ ุนูู ูุนุฏุงุช ูุฃุฏูุงุช ุงูุนูู</li>
                        <li>ูุฑุงุนุงุฉ ููุงุนุฏ ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ</li>
                        <li>ุงูุญูุงุธ ุนูู ุณุฑูุฉ ูุนูููุงุช ุงูุนูู</li>
                    </ul>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-red-600">ุงููุงุฏุฉ 8: ุงูุฌุฒุงุกุงุช ุงูุชุฃุฏูุจูุฉ</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li><strong>ุฅูุฐุงุฑ ุดููู:</strong> ูููุฎุงููุงุช ุงูุจุณูุทุฉ</li>
                        <li><strong>ุฅูุฐุงุฑ ูุชุงุจู:</strong> ูุชูุฑุงุฑ ุงููุฎุงููุงุช</li>
                        <li><strong>ุฎุตู ูุงูู:</strong> ููุบูุงุจ ุบูุฑ ุงููุจุฑุฑ ูุงูุชุฃุฎูุฑ</li>
                        <li><strong>ุงููุตู:</strong> ูู ุญุงูุงุช ุงููุฎุงููุงุช ุงูุฌุณููุฉ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ุงูุจุงุจ ุงูุฎุงูุณ: ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ -->
        <div class="border-l-4 border-purple-500 pl-4">
            <h3 class="text-xl font-bold text-purple-700 mb-4">๐ก๏ธ ุงูุจุงุจ ุงูุฎุงูุณ: ุงูุณูุงูุฉ ูุงูุตุญุฉ ุงูููููุฉ</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-purple-600">ุงููุงุฏุฉ 9: ูุนุฏุงุช ุงูููุงูุฉ</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li>ูุฌุจ ุงุฑุชุฏุงุก ุงูุฎูุฐุฉ ุงููุงููุฉ ูู ููุงูุน ุงูุนูู</li>
                        <li>ุงุณุชุฎุฏุงู ุงูููุงุฒุงุช ุงููุงููุฉ ุนูุฏ ุงูุชุนุงูู ูุน ุงูููุงุฏ ุงูุฎุทุฑุฉ</li>
                        <li>ุงุฑุชุฏุงุก ุงูุฃุญุฐูุฉ Safety ูู ุฌููุน ุงูุฃููุงุช</li>
                        <li>ุงุณุชุฎุฏุงู ุงููุธุงุฑุงุช ุงููุงููุฉ ุนูุฏ ุงูุนูู ุจุงููุญุงู ูุงููุทุน</li>
                    </ul>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-purple-600">ุงููุงุฏุฉ 10: ุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ</h4>
                    <ul class="list-disc mr-4 mt-2 space-y-1 text-sm">
                        <li>ูุฌุจ ุงูุฅุจูุงุบ ููุฑุงู ุนู ุฃู ุฅุตุงุจุฉ ููููุฉ</li>
                        <li>ุชุชููุฑ ุตูุฏููุฉ ุฅุณุนุงูุงุช ุฃูููุฉ ูู ูููุน ุงูุนูู</li>
                        <li>ูุชู ุชุญูู ุงูุดุฑูุฉ ูุชูุงููู ุงูุนูุงุฌ ูู ุญุงูุงุช ุฅุตุงุจุงุช ุงูุนูู</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ุงูุจุงุจ ุงูุณุงุฏุณ: ุฃุญูุงู ุฎุชุงููุฉ -->
        <div class="border-l-4 border-gray-500 pl-4">
            <h3 class="text-xl font-bold text-gray-700 mb-4">๐ ุงูุจุงุจ ุงูุณุงุฏุณ: ุฃุญูุงู ุฎุชุงููุฉ</h3>
            
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-gray-600">ุงููุงุฏุฉ 11: ุชุนุฏูู ุงููุธุงู</h4>
                    <p class="text-sm">ุชุญุชูุธ ุงูุฅุฏุงุฑุฉ ุจุญู ุชุนุฏูู ูุฐุง ุงููุธุงู ูุน ุฅุฎุทุงุฑ ุงูุนุงูููู ูุจู 30 ูููุงู ูู ุงูุชุทุจูู.</p>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h4 class="font-semibold text-gray-600">ุงููุงุฏุฉ 12: ุญู ุงููุฒุงุนุงุช</h4>
                    <p class="text-sm">ูู ุญุงูุฉ ูุดูุก ุฃู ูุฒุงุนุ ูุชู ุญูู ูุฏูุงู ุฃููุงูุ ุซู ุจุงููุฌูุก ุฅูู ุงูุฌูุงุช ุงููุฎุชุตุฉ.</p>
                </div>
            </div>
        </div>

        <!-- ุฎุงุชูุฉ -->
        <div class="bg-green-50 p-4 rounded-xl border border-green-200 text-center">
            <h3 class="text-lg font-bold text-green-800 mb-2">โ ุฎุงุชูุฉ</h3>
            <p class="text-green-700">ูุชููู ููู ุนููุงู ููููุงู ูุขููุงูุ ููุณุนู ูุนุงู ูุชุญููู ุจูุฆุฉ ุนูู ูุซุงููุฉ ุชุญุชุฑู ุญููู ุงูุฌููุน.</p>
            <p class="text-green-600 text-sm mt-2">ุฅุฏุงุฑุฉ ุดุฑูุฉ SOFAZI</p>
        </div>
    </div>
    `;
    
    content.innerHTML = laborLawContent;
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
    
    console.log('โ Modal should be visible now');
}

function closeLaborLaw() {
    console.log('๐ closeLaborLaw function called');
    const modal = document.getElementById('laborLawModal');
    if (modal) {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }
}

// ุชููุฆุฉ ุงูุตูุญุฉ
document.addEventListener('DOMContentLoaded', function() {
    console.log('โ DOM loaded - labor law functions ready');
    
    // ุฅุบูุงู ุงููุงูุฐุฉ ุจุงูุถุบุท ุนูู ESC
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeLaborLaw();
        }
    });

    // ุฅุบูุงู ุงููุงูุฐุฉ ุจุงูุถุบุท ุฎุงุฑุฌ ุงููุญุชูู
    const modal = document.getElementById('laborLawModal');
    if (modal) {
        modal.addEventListener('click', function(event) {
            if (event.target === this) {
                closeLaborLaw();
            }
        });
    }

    // ๐ฅ ุงุฎุชุจุงุฑ: ุชุฃูุฏ ูู ุฃู ุงูุฒุฑ ูุณุชุฏุนู ุงูุฏุงูุฉ ุงูุตุญูุญุฉ
    const laborLawButton = document.querySelector('button[onclick="showLaborLaw()"]');
    if (laborLawButton) {
        console.log('โ Labor law button found:', laborLawButton);
        // ุฅุถุงูุฉ event listener ุฅุถุงูู ููุชุฃูุฏ
        laborLawButton.addEventListener('click', function(e) {
            console.log('โ Button clicked via event listener');
            showLaborLaw();
        });
    } else {
        console.log('โ Labor law button not found!');
    }

    // ุชุฃุซูุฑุงุช ุงูุจุทุงูุงุช ุงูุฃุตููุฉ
    const cards = document.querySelectorAll('.card-modern');
    cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('animate-fade-in-up');
    });

    // ุญูุงูุฉ ุญูู ูููุฉ ุงููุฑูุฑ
    const passwordField = document.getElementById('password-field');
    if (passwordField) {
        passwordField.addEventListener('copy', function(e) {
            if (!e.clipboardData) {
                e.preventDefault();
            }
        });
        
        passwordField.addEventListener('cut', function(e) {
            e.preventDefault();
        });
        
        passwordField.addEventListener('paste', function(e) {
            e.preventDefault();
        });
    }
});

// ๐ฅ ุงูุฏูุงู ุงูุฃุตููุฉ - ุงุญุชูุธ ุจูุง
function togglePasswordVisibility() {
    const passwordField = document.getElementById('password-field');
    const toggleButton = document.getElementById('toggle-password-btn');
    
    if (passwordField.type === 'password') {
        passwordField.type = 'text';
        toggleButton.innerHTML = '<i class="fas fa-eye-slash text-base sm:text-lg"></i>';
        toggleButton.classList.add('text-purple-800');
    } else {
        passwordField.type = 'password';
        toggleButton.innerHTML = '<i class="fas fa-eye text-base sm:text-lg"></i>';
        toggleButton.classList.remove('text-purple-800');
    }
}

function copyPassword() {
    const passwordField = document.getElementById('password-field');
    passwordField.select();
    passwordField.setSelectionRange(0, 99999);
    
    try {
        navigator.clipboard.writeText(passwordField.value).then(function() {
            showToast('ุชู ูุณุฎ ูููุฉ ุงููุฑูุฑ', 'success');
        }).catch(function(err) {
            document.execCommand('copy');
            showToast('ุชู ูุณุฎ ูููุฉ ุงููุฑูุฑ', 'success');
        });
    } catch (err) {
        document.execCommand('copy');
        showToast('ุชู ูุณุฎ ูููุฉ ุงููุฑูุฑ', 'success');
    }
}

function showToast(message, type = 'info') {
    if (typeof window.showToast === 'undefined') {
        alert(message);
    } else {
        window.showToast(message, type);
    }
}

// ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
document.getElementById('change-password-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const submitButton = this.querySelector('button[type="submit"]');
    const originalText = submitButton.innerHTML;
    
    submitButton.innerHTML = '<i class="fas fa-spinner fa-spin ml-2"></i> ุฌุงุฑู ุงูุญูุธ...';
    submitButton.disabled = true;
    
    fetch('/api/worker/change-password', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showToast('ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ', 'success');
            this.reset();
        } else {
            showToast(data.error || 'ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุนุฑูู', 'error');
        }
    })
    .catch(error => {
        showToast('ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู', 'error');
        console.error('Error:', error);
    })
    .finally(() => {
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
    });
});
</script>

<style>
/* ๐ฅ ุชุฃูุฏ ูู ุฃู ุงููุงูุฐุฉ ุชุนูู */
#laborLawModal {
    transition: opacity 0.3s ease;
}

#laborLawModal:not(.hidden) {
    display: flex !important;
    opacity: 1;
}

#laborLawModal.hidden {
    display: none !important;
    opacity: 0;
}

/* ุชูุณููุงุช ุฎุงุตุฉ ููุงููู ุงูุนูู */
.labor-law-content {
    line-height: 1.6;
}

.labor-law-content h3 {
    margin-bottom: 1rem;
}

.labor-law-content h4 {
    margin-bottom: 0.5rem;
}

.labor-law-content ul {
    margin-right: 1rem;
}

.labor-law-content li {
    margin-bottom: 0.25rem;
}

.animate-fade-in-up {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ุชุญุณููุงุช ููุฌูุงู */
@media (max-width: 640px) {
    .card-modern {
        margin: 4px 0;
        border-radius: 16px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    .grid-cols-2 > * {
        margin-bottom: 8px;
    }
    
    /* ุชุญุณูู ุนุฑุถ ุงููุตูุต ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ */
    .text-break {
        word-break: break-word;
        overflow-wrap: break-word;
    }
}

/* ุชุญุณููุงุช ููุดุงุดุงุช ูุชูุณุทุฉ ุงูุญุฌู */
@media (max-width: 768px) {
    .card-modern {
        border-radius: 18px;
    }
}

/* ุชุญุณููุงุช ุงูุชุจุงูู ูุงููุฑุงุกุฉ ุนูู ุงูุฌูุงู */
@media (max-width: 640px) {
    .font-semibold {
        font-weight: 600;
    }
    
    .text-gray-800 {
        color: #1f2937;
    }
    
    .text-gray-600 {
        color: #4b5563;
    }
    
    /* ุชุญุณูู ูุณุงุญุงุช ุงูููุณ ููุฃุฒุฑุงุฑ */
    button, 
    [type="button"], 
    [type="submit"] {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* ุชุญุณูู ูุณุงุญุฉ ุงูููุณ ููุฃููููุงุช ุงูุตุบูุฑุฉ */
    .p-1 {
        padding: 10px;
    }
}

/* ุชุญุณููุงุช ููุนุฑุถ ุงูุฃููู ุนูู ุงูุฌูุงู */
@media (max-width: 640px) and (orientation: landscape) {
    .card-modern {
        margin: 6px 0;
    }
    
    .grid-cols-2 {
        gap: 8px;
    }
}

/* ๐ฅ ุชูุณููุงุช ุฎุงุตุฉ ููุงููู ุงูุนูู */
.labor-law-content h3 {
    margin-bottom: 1rem;
}

.labor-law-content h4 {
    margin-bottom: 0.5rem;
}

.labor-law-content ul {
    margin-right: 1rem;
}

.labor-law-content li {
    margin-bottom: 0.25rem;
}

/* ุชุฃุซูุฑุงุช ููุจุทุงูุงุช ุฏุงุฎู ุงููุงููู */
.labor-law-content .bg-white {
    transition: all 0.3s ease;
}

.labor-law-content .bg-white:hover {
    transform: translateX(-4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
</style>
{% endblock %}