<!-- ======================= -->
<!-- ğŸ“Š STATISTICS CARDS - COMPLETE SYSTEM -->
<!-- ======================= -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-3 md:gap-4 mb-6">
    <!-- Total Orders -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <p class="text-xs md:text-sm opacity-90">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª</p>
          <p class="text-xl md:text-2xl font-bold">{{ orders|length }}</p>
          <p class="text-xs opacity-80 mt-1 hidden md:block">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª</p>
        </div>
        <div class="relative">
          <i class="fas fa-box text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
          <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-blue-300 rounded-full animate-pulse"></div>
        </div>
      </div>
      <div class="mt-2 md:mt-3 pt-2 border-t border-blue-400 border-opacity-30">
        <div class="flex justify-between text-xs">
          <span>Ù†Ø´Ø·Ø©: {{ orders|selectattr('is_paid', 'equalto', false)|list|length }}</span>
          <span>Ù…ÙƒØªÙ…Ù„Ø©: {{ orders|selectattr('is_paid', 'equalto', true)|list|length }}</span>
        </div>
      </div>
    </div>
    
    <!-- Total Amount -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <p class="text-xs md:text-sm opacity-90">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</p>
          <p class="text-xl md:text-2xl font-bold">{{ "%.0f"|format(orders|sum(attribute='total')) }} Ø¯Ø¬</p>
          <p class="text-xs opacity-80 mt-1 hidden md:block">Ù‚ÙŠÙ…Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª</p>
        </div>
        <div class="relative">
          <i class="fas fa-money-bill-wave text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
          <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-purple-300 rounded-full animate-pulse"></div>
        </div>
      </div>
      <div class="mt-2 md:mt-3 pt-2 border-t border-purple-400 border-opacity-30">
        <div class="text-xs">
          <span>Ù…ØªÙˆØ³Ø·: {{ "%.0f"|format((orders|sum(attribute='total') / orders|length) if orders|length > 0 else 0) }} Ø¯Ø¬/Ø·Ù„Ø¨</span>
        </div>
      </div>
    </div>
    
    <!-- Total Costs -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
        <div class="flex items-center justify-between">
            <div class="flex-1">
                <p class="text-xs md:text-sm opacity-90">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ</p>
                <p class="text-xl md:text-2xl font-bold" id="totalCombinedCostDisplay">{{ "%.0f"|format(orders|sum(attribute='total_costs')) }} Ø¯Ø¬</p>
                <p class="text-xs opacity-80 mt-1 hidden md:block">Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</p>
            </div>
            <div class="relative">
                <i class="fas fa-receipt text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
                <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-red-300 rounded-full animate-pulse"></div>
            </div>
        </div>
        <div class="mt-2 md:mt-3 pt-2 border-t border-red-400 border-opacity-30">
            <div class="flex justify-between text-xs">
                <span>Ù…ØµØ§Ø±ÙŠÙ: <span id="totalPurchasesDisplay">0</span> Ø¯Ø¬</span>
                <span>Ù†Ù‚Ù„: <span id="totalTransportDisplay">0</span> Ø¯Ø¬</span>
            </div>
        </div>
    </div>

    <!-- Healthy Orders -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <p class="text-xs md:text-sm opacity-90">Ø·Ù„Ø¨ÙŠØ§Øª Ø³Ù„ÙŠÙ…Ø©</p>
          <p class="text-xl md:text-2xl font-bold" id="healthyOrdersCount">0</p>
          <p class="text-xs opacity-80 mt-1 hidden md:block">Ø¨Ø¯ÙˆÙ† Ø¯ÙŠÙˆÙ†</p>
        </div>
        <div class="relative">
          <i class="fas fa-check-circle text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
          <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-green-300 rounded-full animate-pulse"></div>
        </div>
      </div>
      <div class="mt-2 md:mt-3 pt-2 border-t border-green-400 border-opacity-30">
        <div class="text-xs" id="healthyPercentage">
          <span>Ù†Ø³Ø¨Ø© Ø§Ù„ØµØ­Ø©: 0%</span>
        </div>
      </div>
    </div>

    <!-- Orders with Debts -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer" 
         onclick="showOrdersWithDebts()" 
         id="ordersDebtsCard">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <p class="text-xs md:text-sm opacity-90">Ø·Ù„Ø¨ÙŠØ§Øª Ø¨Ù‡Ø§ Ø¯ÙŠÙˆÙ†</p>
          <p class="text-xl md:text-2xl font-bold" id="ordersDebtsTotal">0 Ø¯Ø¬</p>
          <p class="text-xs opacity-80 mt-1">
            <span id="affectedOrdersCount">0</span> Ø·Ù„Ø¨ÙŠØ© Ù…ØªØ£Ø«Ø±Ø©
          </p>
        </div>
        <div class="text-right">
          <div class="relative">
            <i class="fas fa-file-invoice-dollar text-lg md:text-2xl opacity-80 mb-1 md:mb-2"></i>
            <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-orange-300 rounded-full animate-pulse"></div>
          </div>
          <div class="text-xs bg-white bg-opacity-20 px-2 py-1 rounded-full transition-all duration-300 hover:bg-opacity-30 hidden md:block">
            ğŸ‘ï¸ Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
          </div>
        </div>
      </div>
      <div class="mt-2 md:mt-3 pt-2 border-t border-orange-400 border-opacity-30">
        <div class="text-xs" id="debtPercentage">
          <span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†: 0%</span>
        </div>
      </div>
    </div>
    
    <!-- Total Profit -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
        <div class="flex items-center justify-between">
            <div class="flex-1">
                <p class="text-xs md:text-sm opacity-90">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</p>
                <p class="text-xl md:text-2xl font-bold">{{ "%.0f"|format(orders|sum(attribute='profit')) }} Ø¯Ø¬</p>
                <p class="text-xs opacity-80 mt-1 hidden md:block">ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</p>
            </div>
            <div class="relative">
                <i class="fas fa-chart-line text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
                <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-teal-300 rounded-full animate-pulse"></div>
            </div>
        </div>
        <div class="mt-2 md:mt-3 pt-2 border-t border-teal-400 border-opacity-30">
            <div class="text-xs" id="profitPercentage">
                <span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­: {{ "%.1f"|format((orders|sum(attribute='profit') / orders|sum(attribute='total') * 100) if orders|sum(attribute='total') > 0 else 0) }}%</span>
            </div>
        </div>
    </div>
    
    <!-- Remaining Amount -->
    <div class="card p-3 md:p-4 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1">
      <div class="flex items-center justify-between">
        <div class="flex-1">
          <p class="text-xs md:text-sm opacity-90">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</p>
          <p class="text-xl md:text-2xl font-bold">{{ "%.0f"|format(orders|sum(attribute='remaining')) }} Ø¯Ø¬</p>
          <p class="text-xs opacity-80 mt-1 hidden md:block">Ù…Ø³ØªØ­Ù‚ Ø§Ù„ØªØ­ØµÙŠÙ„</p>
        </div>
        <div class="relative">
          <i class="fas fa-clock text-lg md:text-2xl opacity-80" aria-hidden="true"></i>
          <div class="absolute -top-1 -right-1 w-2 h-2 md:w-3 md:h-3 bg-indigo-300 rounded-full animate-pulse"></div>
        </div>
      </div>
      <div class="mt-2 md:mt-3 pt-2 border-t border-indigo-400 border-opacity-30">
        <div class="text-xs" id="collectionRate">
          <span>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„: {{ "%.1f"|format(((orders|sum(attribute='paid') / orders|sum(attribute='total')) * 100) if orders|sum(attribute='total') > 0 else 0) }}%</span>
        </div>
      </div>
    </div>
</div>

<!-- Real-time Statistics Update Script -->
<script>
// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
function updateRealTimeStats() {
    // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙˆÙ†
    updateDebtsStatistics();
    
    // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
    updateCostsStatistics();
    
    // ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØµØ­Ø©
    updateHealthStatistics();
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¯ÙŠÙˆÙ†
function updateDebtsStatistics() {
    fetch('/api/orders/with_debts')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const stats = data.statistics;
                
                // ØªØ­Ø¯ÙŠØ« Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†
                document.getElementById('ordersDebtsTotal').textContent = Math.round(stats.total_debts) + ' Ø¯Ø¬';
                document.getElementById('affectedOrdersCount').textContent = stats.affected_orders;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ©
                const totalOrders = {{ orders|length }};
                const debtPercentage = totalOrders > 0 ? (stats.affected_orders / totalOrders * 100).toFixed(1) : 0;
                document.getElementById('debtPercentage').innerHTML = `<span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†: ${debtPercentage}%</span>`;
                
                // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø´Ø¯Ø© Ø§Ù„Ø¯ÙŠÙˆÙ†
                const debtCard = document.getElementById('ordersDebtsCard');
                if (debtPercentage > 30) {
                    debtCard.className = debtCard.className.replace('from-orange-500 to-orange-600', 'from-red-500 to-red-600');
                } else if (debtPercentage > 15) {
                    debtCard.className = debtCard.className.replace('from-orange-500 to-orange-600', 'from-orange-500 to-orange-600');
                } else {
                    debtCard.className = debtCard.className.replace('from-red-500 to-red-600', 'from-orange-500 to-orange-600')
                                 .replace('from-orange-500 to-orange-600', 'from-orange-500 to-orange-600');
                }
            }
        })
        .catch(error => {
            console.error('Error updating debts statistics:', error);
        });
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
function updateCostsStatistics() {
    fetch('/api/orders/total-costs')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const costs = data.costs;
                
                // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ
                document.getElementById('totalCombinedCostDisplay').textContent = Math.round(costs.total_combined) + ' Ø¯Ø¬';
                document.getElementById('totalPurchasesDisplay').textContent = Math.round(costs.total_purchases);
                document.getElementById('totalTransportDisplay').textContent = Math.round(costs.total_transport);
                
                // ØªØ­Ø¯ÙŠØ« Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­
                const totalRevenue = {{ orders|sum(attribute='total') }};
                const profitPercentage = totalRevenue > 0 ? ((totalRevenue - costs.total_combined) / totalRevenue * 100).toFixed(1) : 0;
                document.getElementById('profitPercentage').innerHTML = `<span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­: ${profitPercentage}%</span>`;
            }
        })
        .catch(error => {
            console.error('Error updating costs statistics:', error);
        });
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØµØ­Ø©
function updateHealthStatistics() {
    fetch('/api/orders/health-stats')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const stats = data.stats;
                
                // ØªØ­Ø¯ÙŠØ« Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª Ø§Ù„Ø³Ù„ÙŠÙ…Ø©
                document.getElementById('healthyOrdersCount').textContent = stats.healthy_orders;
                document.getElementById('healthyPercentage').innerHTML = `<span>Ù†Ø³Ø¨Ø© Ø§Ù„ØµØ­Ø©: ${stats.healthy_percentage.toFixed(1)}%</span>`;
                
                // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø§Ù„ØµØ­Ø©
                const healthCard = document.querySelector('.bg-gradient-to-r.from-green-500.to-green-600');
                if (stats.healthy_percentage >= 80) {
                    healthCard.className = healthCard.className.replace('from-green-500 to-green-600', 'from-green-500 to-green-600');
                } else if (stats.healthy_percentage >= 60) {
                    healthCard.className = healthCard.className.replace('from-green-500 to-green-600', 'from-yellow-500 to-yellow-600');
                } else {
                    healthCard.className = healthCard.className.replace('from-green-500 to-green-600', 'from-red-500 to-red-600')
                                     .replace('from-yellow-500 to-yellow-600', 'from-red-500 to-red-600');
                }
            }
        })
        .catch(error => {
            console.error('Error updating health statistics:', error);
        });
}

// ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„
function updateCollectionRate() {
    const totalPaid = {{ orders|sum(attribute='paid') }};
    const totalAmount = {{ orders|sum(attribute='total') }};
    const collectionRate = totalAmount > 0 ? (totalPaid / totalAmount * 100).toFixed(1) : 0;
    
    document.getElementById('collectionRate').innerHTML = `<span>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„: ${collectionRate}%</span>`;
    
    // ØªØ­Ø¯ÙŠØ« Ù„ÙˆÙ† Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ØµÙŠÙ„
    const remainingCard = document.querySelector('.bg-gradient-to-r.from-indigo-500.to-indigo-600');
    if (collectionRate >= 90) {
        remainingCard.className = remainingCard.className.replace('from-indigo-500 to-indigo-600', 'from-green-500 to-green-600');
    } else if (collectionRate >= 70) {
        remainingCard.className = remainingCard.className.replace('from-indigo-500 to-indigo-600', 'from-indigo-500 to-indigo-600');
    } else {
        remainingCard.className = remainingCard.className.replace('from-indigo-500 to-indigo-600', 'from-orange-500 to-orange-600')
                             .replace('from-green-500 to-green-600', 'from-orange-500 to-orange-600');
    }
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
function initializeStatsAutoRefresh() {
    // ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    updateRealTimeStats();
    updateCollectionRate();
    
    // ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
    setInterval(() => {
        updateRealTimeStats();
        updateCollectionRate();
    }, 30000);
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('orderUpdated', function() {
        setTimeout(() => {
            updateRealTimeStats();
            updateCollectionRate();
        }, 1000);
    });
}

// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    initializeStatsAutoRefresh();
});

// Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
function initializeCardInteractions() {
    const cards = document.querySelectorAll('.card');
    
    cards.forEach(card => {
        // ØªØ£Ø«ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ±
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
        
        // ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†Ù‚Ø± Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø±
        if (card.classList.contains('cursor-pointer')) {
            card.addEventListener('click', function() {
                this.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
        }
    });
}

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', function() {
    initializeCardInteractions();
});

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©
function updateStatsAfterPayment(amount) {
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ
    const remainingCard = document.querySelector('.bg-gradient-to-r.from-indigo-500.to-indigo-600');
    remainingCard.classList.add('payment-update');
    
    setTimeout(() => {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        updateRealTimeStats();
        updateCollectionRate();
        remainingCard.classList.remove('payment-update');
    }, 1000);
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¹Ù†Ø¯ ØªØ¹Ø¯ÙŠÙ„ Ø·Ù„Ø¨ÙŠØ©
function updateStatsAfterOrderEdit() {
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
        card.classList.add('stats-update');
    });
    
    setTimeout(() => {
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        updateRealTimeStats();
        updateCollectionRate();
        cards.forEach(card => {
            card.classList.remove('stats-update');
        });
    }, 1000);
}

// Ø¥Ø±Ø³Ø§Ù„ Ø­Ø¯Ø« Ø¹Ù†Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨ÙŠØ§Øª
function triggerOrderUpdate() {
    const event = new Event('orderUpdated');
    document.dispatchEvent(event);
}

// ØªØµØ¯ÙŠØ± Ø§Ù„Ø¯ÙˆØ§Ù„ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ
window.updateStatsAfterPayment = updateStatsAfterPayment;
window.updateStatsAfterOrderEdit = updateStatsAfterOrderEdit;
window.triggerOrderUpdate = triggerOrderUpdate;

// ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø¬ÙˆØ§Ù„
function initializeMobileStats() {
    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ù„Ù…Ø³ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    const cards = document.querySelectorAll('.card');
    
    cards.forEach(card => {
        card.addEventListener('touchstart', function() {
            this.style.transform = 'scale(0.98)';
        });
        
        card.addEventListener('touchend', function() {
            this.style.transform = 'scale(1)';
        });
    });
}

// ØªÙ‡ÙŠØ¦Ø© ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„
document.addEventListener('DOMContentLoaded', function() {
    initializeMobileStats();
});
</script>